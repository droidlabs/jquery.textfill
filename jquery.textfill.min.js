(function(d){d.fn.textfill=function(a){a=jQuery.extend({maxFontSize:100,innerTag:"h1",percent:100,height:null,width:null,lineHeight:null},a);this.each(function(){var e=d(a.innerTag+":visible:first",this),b=d(this).find(".textfill-helper-"+a.innerTag),c=a.maxFontSize,i=(a.width||e.width())*(a.percent/100)-5,f,g,h;b.length||(b=d("<span>",{"class":"textfill-helper"}),b.css({position:"absolute",visibility:"hidden"}),b.insertAfter(e));b.html(e.html());do h=a.height||a.lineHeight||parseInt(b.css("line-height"),
10)+2,b.css("font-size",c),f=b.width(),g=b.height(),c-=30>c?1:2;while((f>i||g>h)&&9<c);e.css("font-size",c)});return this}})(jQuery);